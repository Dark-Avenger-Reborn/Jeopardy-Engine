
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Evilengine Scoreboard</title>
    <style>
      /* General Reset */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Arial', sans-serif;
        background-color: #181818; /* Darker background for modern feel */
        color: #f0f0f0; /* Light text for contrast */
        padding: 20px;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        flex-direction: column;
      }

      h1 {
        font-size: 2.5rem;
        margin-bottom: 10px;
        text-align: center;
        color: #4caf50; /* Accent color for heading */
      }

      h2 {
        font-size: 1rem;
        margin-bottom: 30px;
        text-align: center;
        color: #b0b0b0;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        background-color: #2c2c2c;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
      }

      th,
      td {
        padding: 12px 20px;
        text-align: center;
        font-size: 14px;
        border: 1px solid #555;
      }

      thead {
        background-color: #3a3a3a;
        color: #f0f0f0;
        font-weight: 600;
      }

      tbody td {
        background-color: #444;
        transition: background-color 0.3s ease;
      }

      tbody td.green {
        background-color: #4caf50;
      }

      tbody td.red {
        background-color: #f44336;
      }

      tbody th {
        background-color: #3a3a3a;
        font-weight: 600;
        text-align: left;
        padding: 12px;
      }

      .styled-checkbox {
        width: 20px;
        height: 20px;
        cursor: pointer;
        appearance: none;
        border: 2px solid #888;
        border-radius: 5px;
        background-color: #333;
        transition: all 0.3s ease;
      }

      .styled-checkbox:checked {
        background-color: #4caf50;
        border-color: #4caf50;
      }

      .styled-checkbox:checked::after {
        content: "âœ”";
        color: #fff;
        font-size: 14px;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }

      .styled-checkbox:focus {
        outline: none;
      }

      /* Add this new style for IP checkboxes */
      .ip-checkbox {
        margin-right: 5px;
        vertical-align: middle;
      }

      /* Hover effects */
      tbody td:hover {
        background-color: #666;
        cursor: pointer;
      }

      /* Dark theme scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
      }

      ::-webkit-scrollbar-thumb {
        background: #555;
        border-radius: 4px;
      }

      ::-webkit-scrollbar-track {
        background: #212121;
      }

      /* Responsive Table */
      @media (max-width: 768px) {
        table {
          font-size: 12px;
        }

        th, td {
          padding: 8px;
        }

        h1 {
          font-size: 2rem;
        }

        h2 {
          font-size: 0.9rem;
        }
      }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.0.4/socket.io.js"></script>
  </head>
  <body>
    <h1>Evilengine Scoreboard</h1>
    <h2>Default Ports: AD LDAP: 389, Backup HTTP: 80, DevServer SSH: 22, FTP: 21, Ubuntu SSH: 22, WebApp HTTP: 80, WebApp SQL: 3306, WinRM: 5985</h2>
    <table>
      <thead>
        <tr>
          <th></th>
          <th>
            Win AD: <br>DNS
            <input
              class="styled-checkbox top-checkbox"
              type="checkbox"
              data-column="1"
            />
          </th>
          <th>
            Win AD: <br>LDAP 
            <input
              class="styled-checkbox top-checkbox"
              type="checkbox"
              data-column="2"
            />
          </th>
          <th>
            Backup: <br>HTTP
            <input
              class="styled-checkbox top-checkbox"
              type="checkbox"
              data-column="3"
            />
          </th>
          <th>
            DevServer: PING
            <input
              class="styled-checkbox top-checkbox"
              type="checkbox"
              data-column="4"
            />
          </th>
          <th>
            DevServer: SSH
            <input
              class="styled-checkbox top-checkbox"
              type="checkbox"
              data-column="5"
            />
          </th>
          <th>
            UbuntuFTP: <br>FTP
            <input
              class="styled-checkbox top-checkbox"
              type="checkbox"
              data-column="6"
            />
          </th>
          <th>
            Ubuntu1: PING
            <input
              class="styled-checkbox top-checkbox"
              type="checkbox"
              data-column="7"
            />
          </th>
          <th>
            Ubuntu1: <br>SSH
            <input
              class="styled-checkbox top-checkbox"
              type="checkbox"
              data-column="8"
            />
          </th>
          <th>
            Ubuntu2: PING
            <input
              class="styled-checkbox top-checkbox"
              type="checkbox"
              data-column="9"
            />
          </th>
          <th>
            Ubuntu2: <br>SSH
            <input
              class="styled-checkbox top-checkbox"
              type="checkbox"
              data-column="10"
            />
          </th>
          <th>
            WebApp: HTTP
            <input
              class="styled-checkbox top-checkbox"
              type="checkbox"
              data-column="11"
            />
          </th>
          <th>
            WebApp: <br>SQL
            <input
              class="styled-checkbox top-checkbox"
              type="checkbox"
              data-column="12"
            />
          </th>
          <th>
            Windows1: PING
            <input
              class="styled-checkbox top-checkbox"
              type="checkbox"
              data-column="13"
            />
          </th>
          <th>
            Windows1: WINRM
            <input
              class="styled-checkbox top-checkbox"
              type="checkbox"
              data-column="14"
            />
          </th>
          <th>
            Windows2: PING
            <input
              class="styled-checkbox top-checkbox"
              type="checkbox"
              data-column="15"
            />
          </th>
          <th>
            Windows2: WINRM
            <input
              class="styled-checkbox top-checkbox"
              type="checkbox"
              data-column="16"
            />
          </th>
        </tr>
      </thead>
      <tbody id="team-rows">
        <!-- Rows will be inserted dynamically here -->
      </tbody>
    </table>

    <script>
      const socket = io();
      socket.connect(window.location.origin);

      document.addEventListener("DOMContentLoaded", () => {
        const teams = [
          {
            name: "Team 01",
            ipAddresses: [
              "10.1.1.60", "10.1.1.60:389","10.1.2.2:80","10.1.2.10",
              "10.1.2.10:22","10.1.2.4:21","10.1.1.10","10.1.1.10:22",
              "10.1.1.40","10.1.1.40:22","10.1.1.30:80","10.1.1.30:3306",
              "10.1.1.70","10.1.1.70:5985","10.1.1.80","10.1.1.80:5985",
            ],
          },
          {
            name: "Team 02",
            ipAddresses: [
              "10.2.1.60","10.2.1.60:389","10.2.2.2:80","10.2.2.10",
              "10.2.2.10:22","10.2.2.4:21","10.2.1.10","10.2.1.10:22",
              "10.2.1.40","10.2.1.40:22","10.2.1.30:80","10.2.1.30:3306",
              "10.2.1.70","10.2.1.70:5985","10.2.1.80","10.2.1.80:5985",
            ],
          },
          {
            name: "Team 03",
            ipAddresses: [
              "10.3.1.60","10.3.1.60:389","10.3.2.2:80","10.3.2.10",
              "10.3.2.10:22","10.3.2.4:21","10.3.1.10","10.3.1.10:22",
              "10.3.1.40","10.3.1.40:22","10.3.1.30:80","10.3.1.30:3306",
              "10.3.1.70","10.3.1.70:5985","10.3.1.80","10.3.1.80:5985",
            ],
          },
          {
            name: "Team 04",
            ipAddresses: [
              "10.4.1.60","10.4.1.60:389","10.4.2.2:80","10.4.2.10",
              "10.4.2.10:22","10.4.2.4:21","10.4.1.10","10.4.1.10:22",
              "10.4.1.40","10.4.1.40:22","10.4.1.30:80","10.4.1.30:3306",
              "10.4.1.70","10.4.1.70:5985","10.4.1.80","10.4.1.80:5985",
            ],
          },
          {
            name: "Team 05",
            ipAddresses: [
              "10.5.1.60","10.5.1.60:389","10.5.2.2:80","10.5.2.10",
              "10.5.2.10:22","10.5.2.4:21","10.5.1.10","10.5.1.10:22",
              "10.5.1.40","10.5.1.40:22","10.5.1.30:80","10.5.1.30:3306",
              "10.5.1.70","10.5.1.70:5985","10.5.1.80","10.5.1.80:5985",
            ],
          },
          {
            name: "Team 06",
            ipAddresses: [
              "10.6.1.60","10.6.1.60:389","10.6.2.2:80","10.6.2.10",
              "10.6.2.10:22","10.6.2.4:21","10.6.1.10","10.6.1.10:22",
              "10.6.1.40","10.6.1.40:22","10.6.1.30:80","10.6.1.30:3306",
              "10.6.1.70","10.6.1.70:5985","10.6.1.80","10.6.1.80:5985",
            ],
          },
          {
            name: "Team 07",
            ipAddresses: [
              "10.7.1.60","10.7.1.60:389","10.7.2.2:80","10.7.2.10",
              "10.7.2.10:22","10.7.2.4:21","10.7.1.10","10.7.1.10:22",
              "10.7.1.40","10.7.1.40:22","10.7.1.30:80","10.7.1.30:3306",
              "10.7.1.70","10.7.1.70:5985","10.7.1.80","10.7.1.80:5985",
            ],
          },
          {
            name: "Team 08",
            ipAddresses: [
              "10.8.1.60","10.8.1.60:389","10.8.2.2:80","10.8.2.10",
              "10.8.2.10:22","10.8.2.4:21","10.8.1.10","10.8.1.10:22",
              "10.8.1.40","10.8.1.40:22","10.8.1.30:80","10.8.1.30:3306",
              "10.8.1.70","10.8.1.70:5985","10.8.1.80","10.8.1.80:5985",
            ],
          },
          {
            name: "Team 09",
            ipAddresses: [
              "10.9.1.60","10.9.1.60:389","10.9.2.2:80","10.9.2.10",
              "10.9.2.10:22","10.9.2.4:21","10.9.1.10","10.9.1.10:22",
              "10.9.1.40","10.9.1.40:22","10.9.1.30:80","10.9.1.30:3306",
              "10.9.1.70","10.9.1.70:5985","10.9.1.80","10.9.1.80:5985",
            ],
          },
          {
            name: "Team 10",
            ipAddresses: [
              "10.10.1.60","10.10.1.60:389","10.10.2.2:80","10.10.2.10",
              "10.10.2.10:22","10.10.2.4:21","10.10.1.10","10.10.1.10:22",
              "10.10.1.40","10.10.1.40:22","10.10.1.30:80","10.10.1.30:3306",
              "10.10.1.70","10.10.1.70:5985","10.10.1.80","10.10.1.80:5985",
            ],
          },
          {
            name: "Team 11",
            ipAddresses: [
              "10.11.1.60","10.11.1.60:389","10.11.2.2:80","10.11.2.10",
              "10.11.2.10:22","10.11.2.4:21","10.11.1.10","10.11.1.10:22",
              "10.11.1.40","10.11.1.40:22","10.11.1.30:80","10.11.1.30:3306",
              "10.11.1.70","10.11.1.70:5985","10.11.1.80","10.11.1.80:5985",
            ],
          },
          {
            name: "Team 12",
            ipAddresses: [
              "10.12.1.60","10.12.1.60:389","10.12.2.2:80","10.12.2.10",
              "10.12.2.10:22","10.12.2.4:21","10.12.1.10","10.12.1.10:22",
              "10.12.1.40","10.12.1.40:22","10.12.1.30:80","10.12.1.30:3306",
              "10.12.1.70","10.12.1.70:5985","10.12.1.80","10.12.1.80:5985",
            ],
          },
          {
            name: "Team 13",
            ipAddresses: [
              "10.13.1.60","10.13.1.60:389","10.13.2.2:80","10.13.2.10",
              "10.13.2.10:22","10.13.2.4:21","10.13.1.10","10.13.1.10:22",
              "10.13.1.40","10.13.1.40:22","10.13.1.30:80","10.13.1.30:3306",
              "10.13.1.70","10.13.1.70:5985","10.13.1.80","10.13.1.80:5985",
            ],
          },
          {
            name: "Team 14",
            ipAddresses: [
              "10.14.1.60","10.14.1.60:389","10.14.2.2:80","10.14.2.10",
              "10.14.2.10:22","10.14.2.4:21","10.14.1.10","10.14.1.10:22",
              "10.14.1.40","10.14.1.40:22","10.14.1.30:80","10.14.1.30:3306",
              "10.14.1.70","10.14.1.70:5985","10.14.1.80","10.14.1.80:5985",
            ],
          },
          {
            name: "Team 15",
            ipAddresses: [
              "10.15.1.60","10.15.1.60:389","10.15.2.2:80","10.15.2.10",
              "10.15.2.10:22","10.15.2.4:21","10.15.1.10","10.15.1.10:22",
              "10.15.1.40","10.15.1.40:22","10.15.1.30:80","10.15.1.30:3306",
              "10.15.1.70","10.15.1.70:5985","10.15.1.80","10.15.1.80:5985",
            ],
          },
        ];

        const teamRows = document.getElementById("team-rows");

        // Generate table rows for each team
        teams.forEach((team, index) => {
          let row = `<tr>
          <th>Team ${
            index + 1
          } <input class="styled-checkbox row-checkbox" type="checkbox" data-row="${
            index + 1
          }"></th>`;

          team.ipAddresses.forEach((ip) => {
            row += `<td class="green"><input class="styled-checkbox ip-checkbox" type="checkbox"><span>${ip}</span></td>`;
          });

          row += `</tr>`;
          teamRows.innerHTML += row;
        });

        // Handle column checkboxes
        document
          .querySelectorAll('thead input[type="checkbox"]')
          .forEach((checkbox) => {
            checkbox.addEventListener("change", () => {
              const columnIndex = checkbox.dataset.column;
              const isChecked = checkbox.checked;
              document
                .querySelectorAll(
                  `tbody td:nth-child(${parseInt(columnIndex) + 1})`
                )
                .forEach((cell) => {
                  const ipCheckbox = cell.querySelector(".ip-checkbox");
                  cell.className = isChecked ? "red" : "green";
                  ipCheckbox.checked = isChecked;
                  // Emit update to server
                  socket.emit("update_status", {
                    type: "column",
                    index: columnIndex,
                    checked: isChecked,
                  });
                });
            });
          });

        // Handle row checkboxes
        document
          .querySelectorAll("tbody input.row-checkbox")
          .forEach((checkbox) => {
            checkbox.addEventListener("change", () => {
              const row = checkbox.closest("tr");
              const isChecked = checkbox.checked;
              row.querySelectorAll("td").forEach((cell) => {
                const ipCheckbox = cell.querySelector(".ip-checkbox");
                cell.className = isChecked ? "red" : "green";
                ipCheckbox.checked = isChecked;
                // Emit update to server
                const rowIndex = checkbox.dataset.row;
                socket.emit("update_status", {
                  type: "row",
                  index: rowIndex,
                  checked: isChecked,
                });
              });
            });
          });

        // Handle IP checkboxes
        document
          .querySelectorAll("tbody input.ip-checkbox")
          .forEach((checkbox) => {
            checkbox.addEventListener("change", () => {
              const cell = checkbox.closest("td");
              const isChecked = checkbox.checked;
              cell.className = isChecked ? "red" : "green";
              // Emit update to server
              const rowIndex = checkbox
                .closest("tr")
                .querySelector("input.row-checkbox").dataset.row;
              const columnIndex =
                Array.from(cell.parentNode.children).indexOf(cell) + 1;
              socket.emit("update_status", {
                type: "ip",
                row: rowIndex,
                column: columnIndex,
                checked: isChecked,
              });
            });
          });

        // Listen for updates from the server
        socket.on("update_status_all", (data) => {
          // Update based on received data
          if (data.type === "column") {
            document
              .querySelectorAll(`thead input[data-column="${data.index}"]`)
              .forEach((checkbox) => {
                checkbox.checked = data.checked;
              });
            document
              .querySelectorAll(
                `tbody td:nth-child(${parseInt(data.index) + 1})`
              )
              .forEach((cell) => {
                const ipCheckbox = cell.querySelector(".ip-checkbox");
                cell.className = data.checked ? "red" : "green";
                ipCheckbox.checked = data.checked;
              });
          } else if (data.type === "row") {
            document.querySelector(
              `tbody input[data-row="${data.index}"]`
            ).checked = data.checked;
            const row = document.querySelector(
              `tbody tr:nth-child(${data.index})`
            );
            row.querySelectorAll("td").forEach((cell) => {
              const ipCheckbox = cell.querySelector(".ip-checkbox");
              cell.className = data.checked ? "red" : "green";
              ipCheckbox.checked = data.checked;
            });
          } else if (data.type === "ip") {
            const row = document.querySelector(
              `tbody tr:nth-child(${data.row})`
            );
            const cell = row.querySelector(`td:nth-child(${data.column})`);
            const ipCheckbox = cell.querySelector(".ip-checkbox");
            cell.className = data.checked ? "red" : "green";
            ipCheckbox.checked = data.checked;
          }
        });
      });
    </script>
  </body>
</html>
